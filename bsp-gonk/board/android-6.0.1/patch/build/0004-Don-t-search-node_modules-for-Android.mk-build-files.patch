From 6c4d52c748798f9502d7c4fb45e069b26d272d52 Mon Sep 17 00:00:00 2001
From: Michael Vines <mvines@silklabs.com>
Date: Tue, 9 Feb 2016 23:42:48 -0800
Subject: [PATCH] Don't search node_modules/ for Android.mk build files

These are upstream npm things and there can be a lot of them.  Without this
pruning the initial build startup time can be severely impacted.

Change-Id: Iea6a345bbf250df6f336b1e9ea73209a0766942a
---
 core/config.mk | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/core/config.mk b/core/config.mk
index 51810aa..98ce6e7 100644
--- a/core/config.mk
+++ b/core/config.mk
@@ -159,7 +159,7 @@ include $(BUILD_SYSTEM)/envsetup.mk
 
 # Pruned directory options used when using findleaves.py
 # See envsetup.mk for a description of SCAN_EXCLUDE_DIRS
-FIND_LEAVES_EXCLUDES := $(addprefix --prune=, $(OUT_DIR) $(SCAN_EXCLUDE_DIRS) .repo .git)
+FIND_LEAVES_EXCLUDES := $(addprefix --prune=, $(OUT_DIR) $(SCAN_EXCLUDE_DIRS) .repo .git node_modules)
 
 # The build system exposes several variables for where to find the kernel
 # headers:
-- 
2.7.0

